<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"/>
    <link href="https://fonts.googleapis.com/css?family=Staatliches&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/398029acc8.js" crossorigin="anonymous"></script>
    <script src="Scripts/jquery-3.4.1.js"></script>
    <script>
    	    		// body...
    	/*$(document).ready(function(){    		// body...
    		alert('Website need full network access to work Properly')
    	}); */     
    </script>
    <link href="https://fonts.googleapis.com/css?family=Heebo&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/custom.css">
    <script>
     var getTemp = (temp)=>{    
      return Math.floor(temp - 273.15) + decodeURI('%C2%B0') + "C";
     }   
    ////////Load Initial tempature/////////
      $(document).ready(function(){           
          function weatherdata() {
              $.ajax({
                  url: "https://api.openweathermap.org/data/2.5/weather?q=Chennai&APPID=09e7a4e8ee418a607b4fcec06929900e",
                  async: true,
                  type: "GET",
                  datatype:"json",
                  success: function (data) {
                      $("#weather").text(getTemp(data.main.temp))///Add the weather from api
                      $("#location").text(data.name);
                      $('#Status').text(data.weather[0].main)
                      if (data.weather[0].main == "Rain" || data.weather[0].main == "Drizzle") {
                          var imgurl = "/Images/showerrain.jpg"
                          $('#Weather-Header').css('background-image', 'url(https://media.giphy.com/media/t7Qb8655Z1VfBGr5XB/giphy.gif)', 'background-size', 'cover','background-repeat','no-repeat');
                      } else if (data.weather[0].main == "Clouds"){
                          var imgurl = "/Images/showerrain.jpg"
                          $('#Weather-Header').css('background-image', 'url(https://media.giphy.com/media/EoqbRs25zfHYQ/giphy.gif)', 'background-size', 'cover', 'background-repeat', 'no-repeat');

                      } else if (data.weather[0].main == "Clear") {
                          var imgurl = "/Images/showerrain.jpg"
                          $('#Weather-Header').css('background-image', 'url(https://media.giphy.com/media/EoqbRs25zfHYQ/giphy.gif)', 'background-size', 'cover', 'background-repeat', 'no-repeat');

                      } else if (data.weather[0].main == "Haze"||data.weather[0].main=="Mist") {
                          var imgurl = "/Images/showerrain.jpg"
                          $('#Weather-Header').css('background-image', 'url(https://media.giphy.com/media/6hNJHnfsuoFDa/giphy.gif)', 'background-size', 'cover', 'background-repeat', 'no-repeat');

                      }
                      console.log(data)
                  },
                  error: function (ex) {

                      console.log("Error");
                  }

              });
          }
          weatherdata();

          /////////////////////////////////////////////////////////////motivational quotes view//////////////////////////////////////////////////////////////////////
         
       });
        
       var city_name =["ANDAMAN AND NICOBAR ISLANDS","ANDHRA PRADESH","ARUNACHAL PRADESH","ASSAM","BIHAR","CHATTISGARH","CHANDIGARH","DAMAN AND DIU","DELHI","DADRA AND NAGAR HAVELI","GOA","GUJARAT","HIMACHAL PRADESH","HARYANA","JAMMU AND KASHMIR","JHARKHAND","KERALA","KARNATAKA","LAKSHADWEEP","MEGHALAYA","MAHARASHTRA","MANIPUR","MADHYA PRADESH","MIZORAM","NAGALAND","ORISSA","PUNJAB","PONDICHERRY","RAJASTHAN","SIKKIM","TAMIL NADU","TRIPURA","UTTARAKHAND","UTTAR PRADESH","WEST BENGAL","TELANGANA"] 
      $(document).ready(function () {
          $('#Searchbut').click(function(e){             
              var cityname = document.getElementById('cityname').value;
              if (cityname != "") {
                  $.ajax({
                      url: "https://api.openweathermap.org/data/2.5/weather",    ///?q=London&APPID=09e7a4e8ee418a607b4fcec06929900e",
                      async: true,
                      type: "GET",
                      data: { 'q': cityname, 'APPID': '09e7a4e8ee418a607b4fcec06929900e' },
                      datatype: "json",
                      success: function (data) {
                          $("#weather").text(Math.floor(data.main.temp - 273.15) + decodeURI('%C2%B0') + "C")///Add the weather from api
                          $("#location").text(data.name);
                          $('#Status').text(data.weather[0].main);
                          document.getElementById('cityname').value = "";
                          if (data.weather[0].main == "Rain" || data.weather[0].main == "Drizzle") {
                              var imgurl = "/Images/showerrain.jpg"
                              $('#Weather-Header').css('background-image', 'url(https://media.giphy.com/media/t7Qb8655Z1VfBGr5XB/giphy.gif)', 'background-size', 'cover', 'background-repeat', 'no-repeat');                              
                              }else if (data.weather[0].main == "Clouds"){
                                  var imgurl = "/Images/showerrain.jpg"
                                  $('#Weather-Header').css('background-image', 'url(https://media.giphy.com/media/EoqbRs25zfHYQ/giphy.gif)', 'background-size', 'cover', 'background-repeat', 'no-repeat');
                                  
                              } else if (data.weather[0].main == "Clear") {
                                  var imgurl = "/Images/showerrain.jpg"
                                  $('#Weather-Header').css('background-image', 'url(https://media.giphy.com/media/EoqbRs25zfHYQ/giphy.gif)', 'background-size', 'cover', 'background-repeat', 'no-repeat');

                              } else if (data.weather[0].main == "Haze" || data.weather[0].main == "Mist") {
                                  var imgurl = "/Images/showerrain.jpg"
                                  $('#Weather-Header').css('background-image', 'url(https://media.giphy.com/media/6hNJHnfsuoFDa/giphy.gif)', 'background-size', 'cover', 'background-repeat', 'no-repeat');

                              }
                          console.log(data)
                      },
                      error: function (ex) {

                          console.log(ex.responseJSON.cod);
                          if (ex.responseJSON.cod == "404") {
                              alert("City not found");
                              document.getElementById('cityname').value = "";
                          };
                          
                      }
                  });
                  //e.preventDefault();
              } else {

                  alert('Enter the City Name');

              }
              e.preventDefault();
          });
          

      });     
     $('#weather_child_main').empty();
     city_name.forEach(function (argument) {
     	// body...
     	console.log(argument);
        $.ajax({
             url:"https://api.openweathermap.org/data/2.5/weather",
             type:"GET",
             datatype:"json",
             data:{ 'q': argument, 'APPID': '09e7a4e8ee418a607b4fcec06929900e' },
             success:function(data){              
             // console.log(data);
              $('#weather_child_main').append(`<div class="col-md-3" style="margin-top:2%;">
              <div class="card customcard">
              <div class="customname"><h4 style="text-align:center">${data.name}</h4></div></hr>
              <div class="customtemp"><h4 style="font-size:65px;text-align:center;">${getTemp(data.main.temp)}</h4></div>
              <div class="tempstatus">
              <h4 style="font-size:35px;text-align:center;">${(data.weather[0].main)}</h4>
              <img src='images/weatherImage/${data.weather[0].main}.png' class='pngcustom'>
              </div>
              </div>           
              </div>
              </div>`)
             },
             error:function(error){

             }       
        });
        
     });
     
     	var get_children = $('body');
     	console.log(get_children);
     
    </script>
</head>    
<body> 
        <!---weather part-->    
        <div class="container-fluid" style="background-image:url(Images/arial.jpg);background-size:cover;height:300px;opacity:2;overflow-wrap:normal;overflow:visible;" id="header">
            <div class="container">
                <div class="row  justify-content-center text-center" style="height:150px">
                    <input id="cityname" type="input" placeholder="Enter the City Name..." class=" align-self-end custom" style="width:500px; border-radius:4px 4px 4px 4px; height:50px;background-color:#211717;"/>                    
                    <input type="submit" value="Search"   class="align-self-end btn btn-primary " style="width:100px;height:50px;border-radius:4px 4px 4px 4px;" id="Searchbut" />
                </div>                                
            </div>            
        </div>
        <div class="container" style="z-index:5;position: relative;top:-100px !important">
            <div class="row"  id="Weather-Header">
                <div class="col-md-12  align-items-center justify-content-center" id="content-data" style="color:white;background-color:rgba(0,0,0, 0.5);">
                    <p class="display-4" id="weather"></p><!--Weather in celius-->
                    <p class="lead" id="location"></p> <!--State-->  
                    <p  id="Status"></p> <!--Status-->             
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row d-flex justify-content-center align-items-center" id="weather_child_main">
                              
            </div>
        </div>  

<footer style="text-align:center;color:white;font-family: 'Heebo', sans-serif;">
	Created and Design By Vijay
</footer>         

</body>    
     <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="Scripts/jquery-3.4.1.js"></script> 
</html>
